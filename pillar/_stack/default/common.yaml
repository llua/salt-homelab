schedule:
  - highstate:
    - function: state.highstate
    - minutes: 15
salt:
  clean_config_d_dir: False
  minion:
    hash_type: sha256
    auth_tries: 100
    ping_interval: 10
    auth_safemode: False
    #log_file: file:///dev/log
    #log_fmt_logfile: 'salt-master: [%(name)-17s][%(levelname)-8s] %(message)s'
packages:
  - zsh
  - curl
{% if __grains__['kernel'] == 'Linux' %}
  - sysstat
  - strace
  - less
  - ed
  - lsof
  - iproute2
{% endif %}
{% if __grains__['os_family'] not in ['OpenBSD', 'RedHat'] %}
  - vim
{% endif %}
{% if __grains__['os_family'] not in ['Arch', 'OpenBSD', 'FreeBSD'] %}
  - ksh
{% endif %}

sshd_config:
  Port: 22
  Protocol: 2
  HostKey:
    - /etc/ssh/ssh_host_rsa_key
    - /etc/ssh/ssh_host_ecdsa_key
    - /etc/ssh/ssh_host_ed25519_key
  X11Forwarding: 'no'
  SyslogFacility: 'AUTHPRIV'
  LoginGraceTime: 120
  PermitRootLogin: 'no'
  PasswordAuthentication: 'no'
  StrictModes: 'yes'
  PubkeyAuthentication: 'yes'
  IgnoreRhosts: 'yes'
  HostbasedAuthentication: 'no'
  PermitEmptyPasswords: 'no'
  ChallengeResponseAuthentication: 'no'
  TCPKeepAlive: 'yes'
  UsePAM: 'yes'
  UseDNS: 'no'
  PrintMotd: 'yes'
  AcceptEnv: |
    LANG LC_CTYPE LC_NUMERIC LC_TIME LC_COLLATE LC_MONETARY LC_MESSAGES LC_PAPER LC_NAME LC_ADDRESS LC_TELEPHONE LC_MEASUREMENT LC_IDENTIFICATION LC_ALL LANGUAGE XMODIFIERS

sudoers:
  users:
    root:
      - 'ALL=(ALL) ALL'
  groups:
    wheel:
      - 'ALL=(ALL) ALL'
  defaults:
    generic:
      - requiretty
      - '!visiblepw'
      - always_set_home
      - env_reset
      - 'env_keep = "HOME EDITOR LANG LC_ADDRESS LC_CTYPE LC_COLLATE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE LC_TIME LC_ALL LANGUAGE LINGUAS XDG_SESSION_COOKIE SSH_CLIENT SSH_TTY SSH_CONNECTION"'
      - 'secure_path="/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin"'
      - '!insults'
